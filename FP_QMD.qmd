---
title: "Covid-19 case study"
subtitle: "Tracking and analyzing cases throughout the US States"
author: "Naman Khandelwal, Riya Merchant, and Aditi Kumar"
date: "December 14, 2025"

format:
  pdf:
    number-sections: true
    fig-align: center
    cap-location: top
    geometry:
      - top=1in
      - left=1in
      - right=1in
      - bottom=1in
    colorlinks: true

execute:
  echo: false
  warning: false

editor: visual
---

## Introduction

The New York Times state-level dataset provides a daily record of cases and deaths for each state, which allows for a data-driven exploration of how the virus spread. Since this project uses public counts to describe broad patterns, the analysis focuses on summaries appropriate for an introductory statistics course. The report begins with an overview of the dataset, followed by geographic comparisons across states and an examination of trends over time. Throughout the report, the team emphasizes clear documentation, ethical use of data, and reproducibility.

## Data Provenance

This project uses the New York Times COVID-19 state-level dataset, which contains cumulative daily counts of confirmed cases and deaths for each U.S. state. The dataset spans from January 21, 2020 to March 23, 2023 and is compiled from state and local health agencies. The data are publicly available as a CSV file on GitHub, allowing transparent and reproducible analysis.

## FAIR and CARE Principles

The NYTimes COVID-19 dataset aligns with FAIR principles because it is openly accessible, well-documented, and structured in a standardized tabular format. Stable identifiers such as state names and dates allow the dataset to be reused and combined with other data sources. CARE principles are also considered, as COVID-19 data reflect real impacts on communities. This analysis avoids assigning blame to specific states and instead focuses on broader public health patterns.

```{r}
#| label: global-setup

# Code Style Guide: Tidyverse Style Guide

# Primary Author: Naman

# Reviewer: Riya

library(tidyverse)
library(lubridate)
library(janitor)
library(knitr)
library(kableExtra)

us_states <- read_csv(
  "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv",
  show_col_types = FALSE
) %>%
  clean_names()

covid_clean <- us_states %>%
mutate(date = as.Date(date)) %>%
arrange(state, date) %>%
group_by(state) %>%
mutate(
new_cases = cases - lag(cases, default = 0),
new_deaths = deaths - lag(deaths, default = 0)
) %>%
ungroup() %>%
mutate(new_cases = ifelse(new_cases < 0, 0, new_cases))

state_summary <- covid_clean %>%
group_by(state) %>%
summarise(
total_cases = max(cases, na.rm = TRUE),
total_deaths = max(deaths, na.rm = TRUE),
first_date = min(date, na.rm = TRUE),
last_date = max(date, na.rm = TRUE),
.groups = "drop"
) %>%
arrange(desc(total_cases))

state_summary %>%
slice_head(n = 10) %>%
kable(
caption = "Table 1: Overview of NYTimes state-level COVID-19 data (Top 10 States).",
col.names = c("State", "Total Cases", "Total Deaths", "First Report", "Last Report")
) %>%
kable_styling(latex_options = "scale_down")

#| label: cumulative-trends
#| fig-alt: "Line chart of cumulative COVID-19 cases from 2020 to 2023 for Pennsylvania, New York, and California, showing multiple surges with a steep rise during the 2021–2022 winter period."
#| fig-cap: "Figure 1. Cumulative COVID-19 cases over time for Pennsylvania, New York, and California."

# Primary Author: Naman

# Reviewer: Riya

states_of_interest <- c("Pennsylvania", "New York", "California")

plot_data <- covid_clean %>%
filter(state %in% states_of_interest)

ggplot(plot_data, aes(x = date, y = cases, color = state)) +
geom_line(linewidth = 1) +
labs(
title = "Cumulative COVID-19 Cases Over Time",
x = "Date",
y = "Cumulative Cases",
caption = "Data source: New York Times"
) +
theme_minimal() +
theme(legend.position = "bottom")

### Narrative: Cumulative COVID-19 Trends Across States

Figure 1 shows the cumulative number of COVID-19 cases over time for Pennsylvania, New York, and California. These states were selected because they are large, highly populated, and experienced some of the highest total case counts during the pandemic. The figure highlights how case counts increased steadily early on, followed by sharper rises during major national surges.

A particularly steep increase is visible during the winter of 2021–2022, corresponding to the Omicron variant surge, which affected multiple states simultaneously. While all three states follow a similar overall pattern, differences in the slope of the curves reflect variation in population size, timing of outbreaks, and local public health responses. This visualization helps establish a baseline understanding of how the pandemic evolved across major U.S. states before examining more detailed geographic and temporal patterns later in the report.

```
